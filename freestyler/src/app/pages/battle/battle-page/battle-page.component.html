<!-- src/app/components/battle-page/battle-page.component.html -->
<div class="battle-page-container">
  <p-toast [breakpoints]="{ '920px': { width: '100%', right: '0', left: '0' } }" />
  <!-- Local Video Stream -->
  <div class="main-video-container">
    <video #remoteVideo autoplay playsinline></video>
  </div>

  <!-- Remote Video Stream -->
  <div class="small-video-container">
    <video #localVideo autoplay playsinline muted></video>
  </div>

  <!-- Opponent Name Display -->
  <div
    class="opponent-name"
    [ngClass]="{ 'glow-name': applyGlow }"
    [@tada]="triggerTada"
  >
    <p class="long-text">{{ battle?.partner?.name }}</p>
  </div>

  <!-- Top Controls: Timer, Current Word, Start Button, Vote Button -->
  <div class="top-controls">
    <!-- Timer -->
    <div
      class="timer-container"
      [ngClass]="{ invisible: showStartButton }">



      <div class="round-block">
        <h3 class="round-title">Round {{round}}</h3>
        <p-knob *ngIf="isMobile"
        [@flip]="triggerFlipAnimation"
        [@bounceIn]="triggerBounceIn"
        [(ngModel)]="currentTime"
        valueColor="#e91e63"
        rangeColor="SlateGray"
        [size]="40"
        [style]="{ position: 'fixed', top: '-20px', left: '-10'}"
        [strokeWidth]="5"
        [readonly]="true"
        textColor="white"
        [min]="0"
        [max]="60"
      ></p-knob>
        <p>{{ turn ? ownUser?.name : battle?.partner?.name }}</p>
      </div>
      <p-knob *ngIf="isDesktop"
      [@flip]="triggerFlipAnimation"
      [@bounceIn]="triggerBounceIn"
      [(ngModel)]="currentTime"
      valueColor="#e91e63"
      rangeColor="SlateGray"
      [size]="70"
      [strokeWidth]="5"
      [readonly]="true"
      textColor="white"
      [min]="0"
      [max]="60"
    ></p-knob>

    </div>

    <!-- Current Word -->
    <div
      class="current-word"
      [@bounceIn]="triggerBounceIn"
      *ngIf="!showStartButton"
    >
      <p
        class="current-word-p"
        *ngIf="!showStartButton"
        [@bounceIn]="triggerBounceIn"
      >
        {{ currentWord }}
      </p>
    </div>

    <!-- Start Battle Button -->
    <button
      *ngIf="showStartButton"
      class="start-button"
      [@bounceOutRight]="triggerZoomOut"
      (click)="startBattle()"
    >
      START
    </button>

    <!-- Vote Button -->
    <button
      class="vote-button"
      [ngClass]="{ invisible: showStartButton }"
      [@bounceIn]="triggerBounceIn"
      (click)="thumbsUp()"
    >
      <i class="pi pi-thumbs-up-fill"></i>
    </button>
  </div>

  <!-- Bottom Controls: Hang Up Button -->
  <div class="bottom-controls">
    <button class="hangup-btn" (click)="hangUp()">
      <i class="pi pi-phone"></i>
    </button>
  </div>

  <!-- Waiting Messages -->
  <div *ngIf="showWaitingMessage" class="waiting-message">
    <p *ngIf="!showStartButton">Waiting for an opponent to join...</p>
    <p *ngIf="showStartButton">Waiting for the opponent to be ready...</p>
  </div>
</div>
