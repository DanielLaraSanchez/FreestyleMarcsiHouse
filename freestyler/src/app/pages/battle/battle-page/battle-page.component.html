<div class="background">
    <!-- Stars Layer -->
    <div class="stars"></div>
    <!-- Twinkling Effect Layer -->
    <div class="twinkling"></div>
    <!-- Silhouettes of Trees and Mountains -->
    <div class="silhouettes"></div>

    <!-- Battle Interface Container -->
    <div class="battle-container">
      <!-- Desktop View -->
      <div class="desktop-view" *ngIf="!isMobileView">
        <!-- Battler 1 -->
        <div class="battler battler1">
          <img [src]="battler1.profilePicture" alt="{{battler1.name}} Profile" class="profile-pic">
          <!-- <video [src]="battler1.videoStream" controls muted></video> -->
          <div class="battler-info">
            <h3>{{ battler1.name }}</h3>
            <!-- <p>Rank: {{ battler1.rank }}</p> -->
          </div>
          <button class="vote-button" (click)="vote(battler1)">Vote</button>
        </div>

        <!-- Central Timer and Random Word -->
        <div class="central-panel">
          <div class="timer">
            <span>{{ timer }}</span>
          </div>
          <div class="random-word">
            <span>"{{ randomWord }}"</span>
          </div>
          <div class="beat-controls">
            <button class="beat-button" (click)="toggleBeat()">
              <i class="fa" [ngClass]="{'fa-play': backgroundBeat === 'beat1', 'fa-pause': backgroundBeat === 'beat2'}"></i>
            </button>
            <!-- Placeholder for beat selection/upload buttons -->
            <button class="beat-option-button">
              <i class="fa fa-music"></i>
            </button>
            <button class="beat-option-button">
              <i class="fa fa-upload"></i>
            </button>
          </div>
        </div>

        <!-- Battler 2 -->
        <div class="battler battler2">
          <img [src]="battler2.profilePicture" alt="{{battler2.name}} Profile" class="profile-pic">
          <!-- <video [src]="battler2.videoStream" controls muted></video> -->
          <div class="battler-info">
            <h3>{{ battler2.name }}</h3>
            <!-- <p>Rank: {{ battler2.rank }}</p> -->
          </div>
          <button class="vote-button" (click)="vote(battler2)">Vote</button>
        </div>
      </div>

      <!-- Mobile View -->
      <div class="mobile-view" *ngIf="isMobileView">
        <!-- Battler 1 -->
        <div class="battler battler1">
          <img [src]="battler1.profilePicture" alt="{{battler1.name}} Profile" class="profile-pic">
          <!-- <video [src]="battler1.videoStream" controls muted></video> -->
          <div class="battler-info">
            <h3>{{ battler1.name }}</h3>
            <!-- <p>Rank: {{ battler1.rank }}</p> -->
          </div>
          <button class="vote-button" (click)="vote(battler1)">Vote</button>
        </div>

        <!-- Central Timer and Random Word -->
        <div class="central-panel">
          <div class="timer">
            <span>{{ timer }}</span>
          </div>
          <div class="random-word">
            <span>"{{ randomWord }}"</span>
          </div>
          <div class="beat-controls">
            <button class="beat-button" (click)="toggleBeat()">
              <i class="fa" [ngClass]="{'fa-play': backgroundBeat === 'beat1', 'fa-pause': backgroundBeat === 'beat2'}"></i>
            </button>
            <!-- Beat Controls Accessible from Main Screen -->
            <button class="beat-option-button">
              <i class="fa fa-music"></i>
            </button>
            <button class="beat-option-button">
              <i class="fa fa-upload"></i>
            </button>
          </div>
        </div>

        <!-- Battler 2 -->
        <div class="battler battler2">
          <img [src]="battler2.profilePicture" alt="{{battler2.name}} Profile" class="profile-pic">
          <!-- <video [src]="battler2.videoStream" controls muted></video> -->
          <div class="battler-info">
            <h3>{{ battler2.name }}</h3>
            <!-- <p>Rank: {{ battler2.rank }}</p> -->
          </div>
          <button class="vote-button" (click)="vote(battler2)">Vote</button>
        </div>

        <!-- Beat Controls for Mobile -->
        <div class="beat-controls">
          <button class="beat-button" (click)="toggleBeat()">
            <i class="fa" [ngClass]="{'fa-play': backgroundBeat === 'beat1', 'fa-pause': backgroundBeat === 'beat2'}"></i>
          </button>
          <!-- Beat Selection/Upload Buttons -->
          <button class="beat-option-button">
            <i class="fa fa-music"></i>
          </button>
          <button class="beat-option-button">
            <i class="fa fa-upload"></i>
          </button>
        </div>
      </div>

      <!-- Chatbox -->
      <div class="chatbox">
        <h4>Spectators Chat</h4>
        <div class="chat-messages">
          <!-- Mock chat messages -->
          <div class="chat-message">
            <span class="username">User1:</span>
            <span class="message">Great flow!</span>
          </div>
          <div class="chat-message">
            <span class="username">User2:</span>
            <span class="message">Nice rhyme scheme!</span>
          </div>
          <div class="chat-message">
            <span class="username">User3:</span>
            <span class="message">ðŸ”¥ðŸ”¥ðŸ”¥</span>
          </div>
        </div>
        <div class="chat-input">
          <input type="text" placeholder="Type a message...">
          <button><i class="fa fa-paper-plane"></i></button>
        </div>
      </div>

      <!-- Live Stats Progress Bar -->
      <div class="live-stats">
        <div class="stat battler1-stat">
          <span>{{ battler1.name }}:</span>
          <div class="progress">
            <div class="progress-bar" [style.width.%]="calculateVotePercentage(battler1)"></div>
          </div>
        </div>
        <div class="stat battler2-stat">
          <span>{{ battler2.name }}:</span>
          <div class="progress">
            <div class="progress-bar" [style.width.%]="calculateVotePercentage(battler2)"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
